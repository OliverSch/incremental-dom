/**
 * @license
 * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.IncrementalDOM={})}(this,function(t){"use strict";function e(){}function n(t,e,n){this.attrsArr=[],this.staticsApplied=!1,this.key=e,this.keyMap=o(),this.keyMapValid=!0,this.focused=!1,this.nameOrCtor=t,this.text=null,this.typeId=n}var r=Object.prototype.hasOwnProperty;e.prototype=Object.create(null);var i=function(t,e){return r.call(t,e)},o=function(){return new e},a=function(t,e){for(;t.length>e;)t.pop()},u=function(t,e,r,i){var o=new n(e,r,i);return t.__incrementalDOMData=o,o},l=function(t){return f(t),t.__incrementalDOMData},f=function(t){if(!t.__incrementalDOMData){var e=1===t.nodeType,n=e?t.localName:t.nodeName,r=e?t.getAttribute("key"):null,i=t.typeId,o=u(t,n,r,i);if(r&&(l(t.parentNode).keyMap[r]=t),e)for(var a=t.attributes,c=o.attrsArr,p=0;p<a.length;p+=1){var s=a[p],d=s.name,v=s.value;c.push(d),c.push(v)}for(var h=t.firstChild;h;h=h.nextSibling)f(h)}},c=function(t,e){return"svg"===t?"http://www.w3.org/2000/svg":"foreignObject"===l(e).nameOrCtor?null:e.namespaceURI},p=function(t,e,n,r,i){var o=void 0;if("function"==typeof n)o=new n;else{var a=c(n,e);o=a?t.createElementNS(a,n):t.createElement(n)}return u(o,n,r,i),o},s=function(t){var e=t.createTextNode("");return u(e,"#text",null),e},d=function(t){return 11===t.nodeType||9===t.nodeType},v=function(t,e){for(var n=[],r=t;r!==e;)n.push(r),r=r.parentNode;return n},h=Node.prototype.getRootNode||function(){for(var t=this,e=t;t;)e=t,t=t.parentNode;return e},y=function(t){var e=h.call(t);return d(e)?e.activeElement:null},m=function(t,e){var n=y(t);return n&&t.contains(n)?v(n,e):[]},g=function(t,e,n){for(var r=e.nextSibling,i=n;i!==e;){var o=i.nextSibling;t.insertBefore(i,r),i=o}},x=null,k=null,b=null,O=function(t,e){for(var n=0;n<t.length;n+=1)l(t[n]).focused=e},w=function(t){var e=function(e,n,r){var i=b,o=x,a=k;b=e.ownerDocument,k=e.parentNode;var u=m(e,k);O(u,!0);var l=t(e,n,r);return O(u,!1),b=i,x=o,k=a,l};return e},N=w(function(t,e,n){return x=t,S(),e(n),j(),t}),M=w(function(t,e,n){var r={nextSibling:t};return x=r,e(n),t!==x&&t.parentNode&&D(k,t,l(k).keyMap),r===x?null:x}),A=function(t,e,n,r){var i=l(t);return e===i.nameOrCtor&&r===i.typeId&&n==i.key},C=function(t,e,n){if(!x||!A(x,t,e,n)){var r=l(k),i=x&&l(x),o=r.keyMap,a=void 0;if(e){var u=o[e];u&&(A(u,t,e,n)?a=u:u!==x&&D(k,u,o))}a||(a="#text"===t?s(b):p(b,k,t,e,n),e&&(o[e]=a)),l(a).focused?g(k,a,x):i&&i.key&&!i.focused?(k.replaceChild(a,x),r.keyMapValid=!1):k.insertBefore(a,x),x=a}},D=function(t,e,n){e.parentNode===t&&t.removeChild(e);var r=l(e).key;r&&delete n[r]},I=function(){var t=k,e=l(t),n=e.keyMap,r=e.keyMapValid,i=t.lastChild,o=void 0;if(i!==x||!r){for(;i!==x;)D(t,i,n),i=t.lastChild;if(!r){for(o in n)i=n[o],i.parentNode!==t&&delete n[o];e.keyMapValid=!0}}},S=function(){k=x,x=null},_=function(){return x?x.nextSibling:k.firstChild},T=function(){x=_()},j=function(){I(),x=k,k=k.parentNode},E=function(t,e,n){return T(),C(t,e,n),S(),k},V=function(){return j(),x},P=function(){return T(),C("#text",null),x},B=function(){return k},R=function(){return _()},L=function(){x=k.lastChild},U=T,X={default:"__default"},q=function(t){return 0===t.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===t.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},z=function(t,e,n){if(null==n)t.removeAttribute(e);else{var r=q(e);r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}},F=function(t,e,n){t[e]=n},G=function(t,e,n){e.indexOf("-")>=0?t.setProperty(e,n):t[e]=n},H=function(t,e,n){if("string"==typeof n)t.style.cssText=n;else{t.style.cssText="";var r=t.style,o=n;for(var a in o)i(o,a)&&G(r,a,o[a])}},J=function(t,e,n){var r=typeof n;"object"===r||"function"===r?F(t,e,n):z(t,e,n)},K=function(t,e,n){var r=Q[e]||Q[X.default];r(t,e,n)},Q=o();Q[X.default]=J,Q.style=H;var W=3,Y=[],Z=o(),$=function(t,e,n){var r=E(t,e),i=l(r);if(!i.staticsApplied){if(n)for(var o=0;o<n.length;o+=2){var u=n[o],f=n[o+1];K(r,u,f)}i.staticsApplied=!0}for(var c=i.attrsArr,p=!c.length,s=W,d=0;s<arguments.length;s+=2,d+=2){var u=arguments[s];if(p)c[d]=u;else if(c[d]!==u)break;var f=arguments[s+1];(p||c[d+1]!==f)&&(c[d+1]=f,K(r,u,f))}if(s<arguments.length||d<c.length){for(var v=d;d<c.length;d+=2)Z[c[d]]=c[d+1];for(d=v;s<arguments.length;s+=2,d+=2){var u=arguments[s],f=arguments[s+1];Z[u]!==f&&K(r,u,f),c[d]=u,c[d+1]=f,delete Z[u]}d<c.length&&a(c,d);for(var u in Z)K(r,u,void 0),delete Z[u]}return r},tt=function(t,e,n){Y[0]=t,Y[1]=e,Y[2]=n},et=function(t,e){Y.push(t),Y.push(e)},nt=function(){var t=$.apply(null,Y);return a(Y,0),t},rt=function(){var t=V();return t},it=function(t){return $.apply(null,arguments),rt(t)},ot=function(t){var e=P(),n=l(e);if(n.text!==t){n.text=t;for(var r=t,i=1;i<arguments.length;i+=1){var o=arguments[i];r=o(r)}e.data=r}return e};t.patch=N,t.patchInner=N,t.patchOuter=M,t.open=E,t.close=V,t.currentElement=B,t.currentPointer=R,t.skip=L,t.skipNode=U,t.elementVoid=it,t.elementOpenStart=tt,t.elementOpenEnd=nt,t.elementOpen=$,t.elementClose=rt,t.text=ot,t.attr=et,t.symbols=X,t.attributes=Q,t.applyAttr=z,t.applyProp=F,t.importNode=f});

//# sourceMappingURL=incremental-dom-min.js.map
